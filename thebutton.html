<head>
  <title>Build Your Own /r/thebutton</title>
  <script src="https://www.google.com/jsapi"></script>
  <script>google.load("visualization", "1", {packages:["corechart"]});</script>
</head>

<body>
	<nav>
		<h1>The Button</h1>

		<div class="thebutton-participants">
			{{numParticipants}} participants
		</div>

		{{> loginButtons align="right"}}
	</nav>
	{{> thebutton}}

	<div class="what-is-this">
		<h2>How does this work? Read <a href="https://medium.com/@Rahul/build-your-own-r-thebutton-with-meteor-d4b878fbb0d2">Build your own /r/thebutton</a></h2>
		<p>
			Made by <a href="http://twitter.com/rahul">@Rahul</a> with <a href="http://meteor.com">Meteor</a>.
		</p>
		<p>
			<iframe src="https://ghbtns.com/github-btn.html?user=primigenus&repo=thebutton&type=star&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
			<iframe src="https://ghbtns.com/github-btn.html?user=primigenus&repo=thebutton&type=fork&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
		</p>
	</div>
</body>

<template name="thebutton">

	<div class="thebutton-container">
		<div class="thebutton-button">
			{{#if currentUser}}
				{{#if timeRemainingWhenClicked}}
					You clicked on {{clicked}} with <span class="remaining-{{timeRemainingWhenClicked}}">{{timeRemainingWhenClicked}}s</span> remaining
				{{else}}
					{{#if timeRemaining}}
						<button title="Click it!"></button>
					{{else}}
						<button disabled></button>
					{{/if}}
				{{/if}}
			{{else}}
				{{#if timeRemaining}}
					<button disabled>You must log in</button>
				{{else}}
					<button disabled></button>
				{{/if}}
			{{/if}}
		</div>
		{{> piechart}}
		{{> countdown}}
	</div>

</template>

<template name="piechart">
	<div>
		<div class="thebutton-piechart-container">
			<div class="thebutton-piechart"></div>
		</div>
	</div>
</template>

<template name="countdown">
	<div class="thebutton-countdown">
		<span class="countdown-60s">{{countdown60s}}</span>
		<span class="countdown-10s">{{countdown10s}}</span>
		<span class="countdown-100ms">{{countdown100ms}}</span>
		<span class="countdown-10ms">{{countdown10ms}}</span>
	</div>
</template>
